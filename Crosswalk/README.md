# crosswalk

These are the source code and data used for the CrossWalk paper.


Datasets are located in the 'data' directory.

Figures of the 'Experiments' section can be regenerated by running the jupyter notebooks in the 'notebooks' directory. Figure 2 has been generated by the code in the 'tsne' directory.

The 'deepwalk' directory can be used to generate embeddings. Proper dataset files should be copied into the correct sub-directories before running the code.

Directories 'influene_maximization', 'classifier' and 'link_prediction' contain codes for corresponding tasks. Proper dataset files and embeddings (generated by deepwalk) should be copied into the correct sub-directories before running the codes.


# Notes about the implementation details
###### About CrossWalk paper.
The authors first apply the algorithm to learn node representations, using DeepWalk and Node2Vec in: synthetic networks, Rice-Facebook and a Twitter subset.
Then, various graph algorithms are applied on the node representations, including influence maximization, node classification, and link prediction.

###### Problem Formulation
The random traversal algorithms, DeepWalk and Node2Vec leverage random walks to preserve higher-order proximity between nodes and learn their representation.
The normalized transition probabilities p_ij between nodes i and j can be (in a weighted network), the normalized edge probabilities.

The fairness metric used in the paper is **Disparity**. For enhancing fairness of an algorithm, the goal is to have a lower disparity score.
Intuition is to modify the edge weights, so that when for producing node embeddings by a random walk algorithm, the performance of the algorithm on the produced representation has a higher fairness and a smaller discrepancy on different groups.

Thus, the following problem flow is considered:

**Original graph: G &rarr; CrossWalk: G' &rarr; Random walk algorithm: RW &rarr; Node representations &rarr; Algorithm A &rarr; Performance of A on graph: Q**

###### CrossWalk. The algorithm.
Assign larger weights to:
1. edges connected to nodes closer to groups' peripherals.
2. edges tat are connecting nodes from different groups.

The re-weighting biases random walks (initiated) within a given group towards visiting nodes on the group boundary, and eventually crossing boundaries & visiting nodes from other groups.

###### Notes on recreating the experiments.

**deepwalk/run_fact.sh**

Options of the deepwalk command: $ python deepwalk --help

d: dimensionality of the latent space for the node representation.


###### Choosing between Node2Vec and Skipgram

In order to choose between Node2Vec and Skipgram, you have to satisfy the following constraint:

```
num_walks = len(G.nodes()) * args.number_walks
data_size = num_walks * args.walk_length
data_size < args.max_memory_data_size: if this is true, then Node2Vec will be run, otherwise the script will use Skipgram
```